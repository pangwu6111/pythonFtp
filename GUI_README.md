# FTP断点续传下载工具 - GUI版本

一个功能完整的图形界面FTP客户端，支持断点续传、批量下载、文件同步等高级功能。

## 功能特性

### 🔥 核心功能
- ✅ **断点续传**: 支持大文件的可靠下载，中断后自动续传
- ✅ **批量下载**: 多文件并发下载，可设置最大并发数
- ✅ **目录浏览**: 直观的文件浏览器界面，支持双击操作
- ✅ **进度监控**: 实时显示下载进度、速度和剩余时间
- ✅ **自动重试**: 网络中断时自动重连和重试

### 🚀 高级功能
- ✅ **文件同步**: 支持本地与远程目录的自动同步
- ✅ **传输队列**: 完整的传输任务管理系统
- ✅ **书签管理**: 保存常用FTP服务器连接
- ✅ **会话管理**: 保存和恢复连接会话
- ✅ **文件过滤**: 支持通配符和排除模式
- ✅ **操作日志**: 详细的操作记录和错误追踪

### 💡 智能功能
- ✅ **智能重连**: 连接断开时自动重连
- ✅ **文件校验**: 支持MD5/SHA1校验和验证
- ✅ **批量操作**: 批量重命名、删除等操作
- ✅ **文件比较**: 本地与远程文件对比
- ✅ **定时同步**: 支持定时自动同步任务

## 系统要求

- **操作系统**: Windows 11/10, macOS, Linux
- **Python版本**: Python 3.6+
- **依赖库**: tkinter (通常随Python安装)
- **内存**: 建议512MB以上
- **磁盘空间**: 50MB以上

## 安装使用

### 方法1: 直接运行 (推荐)

1. 确保已安装Python 3.6+
2. 下载所有文件到同一目录
3. 双击 `run_ftp_gui.bat` (Windows) 或运行 `python ftp_gui.py`

### 方法2: 命令行运行

```bash
# 基础版本
python ftp_gui.py

# 高级版本 (更多功能)
python ftp_gui_advanced.py
```

## 界面说明

### 主界面布局

```
┌─────────────────────────────────────────────────────────────┐
│ 菜单栏: 文件 | 传输 | 同步 | 工具 | 帮助                      │
├─────────────────────────────────────────────────────────────┤
│ 连接面板: [服务器] [端口] [用户名] [密码] [连接] [断开]        │
├─────────────────────────────────────────────────────────────┤
│ ┌─────────────────────┐ ┌─────────────────────────────────┐ │
│ │   远程文件浏览       │ │        下载管理                 │ │
│ │                     │ │                                 │ │
│ │ 📁 目录1            │ │ 📄 file1.zip  [████████] 85%   │ │
│ │ 📄 file1.zip        │ │ 📄 file2.pdf  [██░░░░░░] 25%   │ │
│ │ 📄 file2.pdf        │ │ 📄 file3.doc  [等待中]         │ │
│ │                     │ │                                 │ │
│ │ [下载选中] [下载目录] │ │ [开始全部] [暂停全部] [清除]    │ │
│ └─────────────────────┘ └─────────────────────────────────┘ │
├─────────────────────────────────────────────────────────────┤
│ 状态栏: 就绪 | 已连接到 ftp.example.com                     │
└─────────────────────────────────────────────────────────────┘
```

### 功能区域详解

#### 1. 连接面板
- **服务器地址**: FTP服务器的IP或域名
- **端口**: FTP端口，默认21
- **用户名**: 登录用户名，留空表示匿名登录
- **密码**: 登录密码
- **快速连接**: 预设的常用服务器

#### 2. 远程文件浏览
- **路径导航**: 显示当前路径，支持手动输入
- **文件列表**: 显示文件和目录，包含大小、类型、修改时间等信息
- **操作按钮**: 下载选中文件、下载整个目录、创建新目录

#### 3. 下载管理
- **保存路径**: 设置本地保存目录
- **任务列表**: 显示所有下载任务的进度和状态
- **控制按钮**: 开始、暂停、清除下载任务
- **统计信息**: 显示任务总数、进行中、已完成、失败数量

## 使用教程

### 基本操作

#### 1. 连接FTP服务器

```
1. 输入服务器信息
   - 服务器: ftp.example.com
   - 端口: 21 (默认)
   - 用户名: your_username (或留空匿名登录)
   - 密码: your_password

2. 点击"连接"按钮

3. 连接成功后会显示远程文件列表
```

#### 2. 浏览和下载文件

```
1. 浏览文件
   - 双击目录进入子目录
   - 点击"上级"返回上级目录
   - 点击"刷新"更新文件列表

2. 下载文件
   - 双击文件开始下载
   - 选中多个文件后点击"下载选中"
   - 点击"下载目录"下载当前目录所有文件

3. 设置保存路径
   - 在下载管理区域点击"浏览"选择保存目录
```

### 高级功能

#### 1. 文件同步配置

```
1. 菜单 -> 同步 -> 同步配置

2. 创建新的同步配置
   - 配置名称: 给配置起个名字
   - 远程路径: FTP服务器上的目录
   - 本地路径: 本地计算机上的目录
   - 同步模式: 仅下载/仅上传/双向同步

3. 设置文件过滤
   - 文件过滤: *.zip;*.pdf (只同步这些类型)
   - 排除模式: temp*;*.tmp (排除这些文件)

4. 同步选项
   - 删除本地多余文件: 删除远程没有的本地文件
   - 保持文件时间戳: 保持原始修改时间
   - 自动同步: 定时自动执行同步

5. 保存并执行同步
```

#### 2. 传输队列管理

```
1. 菜单 -> 传输 -> 传输队列

2. 查看所有传输任务
   - 队列中的任务
   - 正在进行的任务
   - 已完成的任务
   - 失败的任务

3. 任务控制
   - 暂停/恢复选中任务
   - 取消不需要的任务
   - 清除已完成的任务

4. 传输设置
   - 最大并发数: 同时下载的文件数
   - 块大小: 每次读取的数据量
   - 重试次数: 失败后的重试次数
```

#### 3. 书签管理

```
1. 连接成功后，菜单 -> 文件 -> 保存会话

2. 给连接起个名字，保存为书签

3. 下次使用时，菜单 -> 文件 -> 加载会话

4. 导入/导出书签
   - 导出: 保存书签到文件
   - 导入: 从文件加载书签
```

## 配置文件

### 主配置文件 (ftp_config.json)

```json
{
  "host": "ftp.example.com",
  "port": "21",
  "username": "anonymous",
  "download_path": "C:\\Users\\Username\\Downloads",
  "max_concurrent": 3,
  "chunk_size": 8192,
  "auto_retry": true,
  "retry_count": 3,
  "timeout": 30
}
```

### 同步配置文件 (sync_profiles.json)

```json
{
  "profiles": [
    {
      "name": "网站备份",
      "remote_path": "/public_html",
      "local_path": "D:\\Backup\\Website",
      "sync_mode": "download",
      "file_filters": ["*.html", "*.css", "*.js", "*.php"],
      "exclude_patterns": ["cache/*", "*.log"],
      "delete_extra": false,
      "preserve_timestamps": true,
      "auto_sync": true,
      "sync_interval": 3600
    }
  ]
}
```

### 书签文件 (bookmarks.json)

```json
{
  "bookmarks": [
    {
      "name": "公司FTP",
      "host": "ftp.company.com",
      "port": 21,
      "username": "employee",
      "password": "encrypted_password",
      "default_path": "/home/employee"
    }
  ]
}
```

## 快捷键

| 快捷键 | 功能 |
|--------|------|
| `F5` | 刷新文件列表 |
| `Ctrl+D` | 下载选中文件 |
| `Ctrl+N` | 新建连接 |
| `Ctrl+O` | 打开会话 |
| `Ctrl+S` | 保存会话 |
| `Ctrl+Q` | 退出程序 |
| `Ctrl+L` | 显示日志窗口 |
| `F1` | 显示帮助 |
| `Delete` | 删除选中文件 |
| `F2` | 重命名文件 |

## 故障排除

### 常见问题

#### 1. 连接失败
```
问题: 无法连接到FTP服务器
解决:
- 检查服务器地址和端口是否正确
- 确认用户名和密码
- 检查防火墙设置
- 尝试被动模式连接
```

#### 2. 下载中断
```
问题: 下载过程中网络中断
解决:
- 程序会自动重试
- 手动点击"开始全部"继续下载
- 检查网络连接稳定性
- 增加重试次数和超时时间
```

#### 3. 文件权限错误
```
问题: 无法保存到本地目录
解决:
- 检查本地目录的写权限
- 选择其他保存目录
- 以管理员身份运行程序
```

#### 4. 同步失败
```
问题: 文件同步不成功
解决:
- 检查远程和本地路径是否存在
- 确认文件过滤器设置正确
- 查看日志了解详细错误信息
- 手动测试连接和权限
```

### 性能优化

#### 1. 下载速度优化
```
- 增加并发下载数 (但不要超过服务器限制)
- 调整块大小 (网络好时可以增大)
- 使用有线网络连接
- 关闭不必要的网络程序
```

#### 2. 内存使用优化
```
- 减少并发下载数
- 定期清理已完成的任务
- 限制日志文件大小
- 关闭不需要的功能
```

## 技术支持

### 日志文件位置
- Windows: `%APPDATA%\FTPDownloader\logs\`
- macOS: `~/Library/Application Support/FTPDownloader/logs/`
- Linux: `~/.config/FTPDownloader/logs/`

### 配置文件位置
- 与程序文件在同一目录
- 可以手动编辑配置文件
- 建议定期备份配置

### 获取帮助
1. 程序内置帮助: 菜单 -> 帮助 -> 使用说明
2. 查看操作日志: 菜单 -> 工具 -> 显示日志
3. 检查配置文件格式
4. 重置配置文件到默认状态

## 更新日志

### v2.0 (当前版本)
- ✅ 全新的图形界面
- ✅ 文件同步功能
- ✅ 传输队列管理
- ✅ 书签和会话管理
- ✅ 高级文件操作

### v1.0
- ✅ 基本FTP连接和下载
- ✅ 断点续传功能
- ✅ 命令行界面

## 许可证

本软件基于MIT许可证开源，可自由使用和修改。